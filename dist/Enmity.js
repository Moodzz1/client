var ws,Type,ManagerType,Levels,Core=Promise.resolve().then(function(){return index$1});try{Core.then(e=>e.initialize())}catch(e){alert("Enmity failed to initialize: "+e.message)}function log(...e){return console.log("\xbb",...e)}function error(...e){return console.error("\xbb",...e)}function success(...e){return console.log("\xbb",...e)}function warn(...e){return console.warn("\xbb",...e)}function debug(...e){return console.debug("\xbb",...e)}function info(...e){return console.info("\xbb",...e)}function createLogger(...e){var t=e.join(" â†’ ")+":";return{log:(...e)=>log(t,...e),error:(...e)=>error(t,...e),success:(...e)=>success(t,...e),warn:(...e)=>warn(t,...e),debug:(...e)=>debug(t,...e),info:(...e)=>info(t,...e)}}function byProps(...e){return t=>{for(var r=0,n=e.length;r<n;r++)if(void 0===t[e[r]])return!1;return!0}}function byPrototypes(...e){return t=>{if(!t.prototype)return!1;for(var r=0,n=e.length;r<n;r++)if(void 0===t.prototype[e[r]])return!1;return!0}}function byDisplayName(e){return t=>t.displayName===e}function byName(e){return t=>t.name===e}function byStore(e,t=!0){return r=>r._dispatcher&&r.getName?.()===(t?e+"Store":e)}var Filters={byProps,byDisplayName,byPrototypes,byName,byStore},_typeof$4=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},data={cache:[],patchedMoment:!1};function find$1(e,t={}){var r=function(e){if(!modules[e].isInitialized)try{__r(e)}catch{return deenumerate(e),"continue"}var t=modules[e].publicModule.exports;if(!t||t===window||null===t[Symbol()])return deenumerate(e),"continue";if(!data.patchedMoment&&t.defineLocale){var r=t.defineLocale,i=t.locale();t.defineLocale=function(...e){try{r.apply(this,e),t.locale(i)}catch(n){console.error("Failed to define moment locale:",n.message)}},data.patchedMoment=!0}if(u(t,e)){data.cache[e]=t;var a=l?modules[e]:t;if(!n)return{v:a};c.found.push(a)}if(s&&t.default&&u(t.default,e)){data.cache[e]=t;var f=l?modules[e]:o?t.default:t;if(!n)return{v:f};c.found.push(f)}};if(!e)throw Error("You must provide a filter to search by.");var{all:n=!1,interop:o=!0,cache:i=!0,initial:a=null,esModules:s=!0,raw:l=!1}=t,c={found:a??[],errored:!1},u=(t,r)=>{try{return e(t,r)}catch(n){if(c.errored)return;c.errored=!0,console.error("Search filter threw an error, degrading performance.","This will create a bad experience for the user including lag spikes, a slow startup, etc.","Please fix this as soon as possible.")}},f=i?data.cache:modules;for(var d in f){var h=r(d);if("object"===_typeof$4(h))return h.v}return!i||n||c.found.length?i&&n?find$1(e,Object.assign(t,{cache:!1,initial:c.found})):n?c.found:null:find$1(e,Object.assign(t,{cache:!1}))}function bulk(...e){var t=Array(e.length);return find$1((r,n)=>{for(var o=0,i=e.length;o<i;o++){var a=e[o];a.filter&&(a.filter(r,n)&&(t[o]=r),void 0!==r.default&&a.filter(r.default,n)&&(t[o]=a.interop??!0?r.default:r))}return t.filter(String).length===search.length},{interop:!1,esModules:!1}),t}function findByProps(...e){var[t,r]=parseOptions(e);return search(t,r,"byProps")}function findByPrototypes(...e){var[t,r]=parseOptions(e);return search(t,r,"byPrototypes")}function findStore(...e){var[[t],{short:r=!0,...n}]=parseOptions(e);return search([t,r],n,"byStore")}function findByName(...e){var[t,r]=parseOptions(e);return search(t,r,"byName")}function search(e,t,r){if(t.lazy){var n;return new Proxy({__METRO_LAZY__:!0,get module(){return n}},{get(o,i){if(i&&"string"==typeof i)return(n??=search(e,Object.assign(t,{lazy:!1}),r),"module"===i)?n:n?.[i]},set:(o,i,a)=>Object.defineProperty((n??=search(e,Object.assign(t,{lazy:!1}),r))??{},i,{value:a,writable:!0,configurable:!0})})}if("string"==typeof r&&(r=Filters[r]),r)return t.bulk?bulk(...e.map(e=>Array.isArray(e)||"object"!=typeof e?{filter:r(...e),interop:!0}:{filter:r(...e.params),...e})):find$1(r(...e),t)}function parseOptions(e,t=e=>"object"==typeof e&&!Array.isArray(e),r={}){return[e,t(e[e.length-1])?e.pop():r]}function deenumerate(e){Object.defineProperty(modules,e,{value:modules[e],enumerable:!1,configurable:!0,writable:!0})}var Modules=Object.freeze({__proto__:null,find:find$1,bulk:bulk,findByProps:findByProps,findByPrototypes:findByPrototypes,findStore:findStore,findByName:findByName}),React=findByProps("createElement","Children",{lazy:!0}),Flux=findByProps("Store","connectStores",{lazy:!0}),ReactNative=findByProps("AppState",{lazy:!0}),EventEmitter=findByProps("EventEmitter").EventEmitter,Moment=findByProps("isMoment"),StyleSheet=findByProps("createThemedStyleSheet",{lazy:!0}),Constants=findByProps("API_HOST","Endpoints",{lazy:!0}),Dispatcher=findByProps("_dispatch",{lazy:!0}),REST=findByProps("getAPIBaseURL",{lazy:!0}),i18n$1=findByProps("Messages",{lazy:!0}),Common=Object.freeze({__proto__:null,React:React,Flux:Flux,ReactNative:ReactNative,EventEmitter:EventEmitter,Moment:Moment,StyleSheet:StyleSheet,Constants:Constants,Dispatcher:Dispatcher,REST:REST,i18n:i18n$1}),Logger$2=createLogger("Debug","WebSocket");function initialize$4(isReconnect=!1){var{ENMITY_DEV_IP}=globalThis;try{ws=new WebSocket(`ws://${ENMITY_DEV_IP??"192.168.0.35"}:9090`)}catch(e){alert("Failed to connect to the debug websocket. Make sure the host is reachable."),Logger$2.error(e.message)}ws?.addEventListener("open",()=>{Logger$2.success(isReconnect?"Reconnected.":"Connected.")}),ws?.addEventListener("message",message=>{try{Logger$2.log(eval(message.data))}catch(e){Logger$2.error(e)}}),globalThis._nativeLoggingHook=nativeLoggingHook,globalThis.nativeLoggingHook=function(e,t){return ws?.readyState===WebSocket.OPEN&&ws.send(JSON.stringify({level:t,message:e})),globalThis._nativeLoggingHook.apply(this,arguments)};var{remove}=ReactNative.AppState?.addEventListener("change",e=>{switch(e){case"active":if(ws||ws?.readyState===WebSocket.OPEN)return;remove(),initialize$4(!0);break;case"background":shutdown$3()}})}function shutdown$3(){globalThis._nativeLoggingHook&&(globalThis.nativeLoggingHook=globalThis._nativeLoggingHook),ws?.readyState===WebSocket.OPEN&&(ws.close(),ws=null)}var WebSocket$1={initialize:initialize$4,shutdown:shutdown$3},Guilds=findStore("Guild",{lazy:!0}),Theme=findStore("Theme",{lazy:!0}),Users=findStore("User",{lazy:!0}),Stores=Object.freeze({__proto__:null,Guilds:Guilds,Theme:Theme,Users:Users}),Themes$3=findByProps("updateTheme","overrideTheme",{lazy:!0}),Profiles=findByProps("showUserProfile",{lazy:!0}),UI=Object.freeze({__proto__:null,Themes:Themes$3,Profiles:Profiles});function initialize$3(){Dispatcher?.subscribe&&Dispatcher.subscribe("CONNECTION_OPEN",handler)}function handler(){Themes$3.overrideTheme(Theme.theme)}var ThemeFix={initialize:initialize$3},Native=findByProps("Button","View","Text",{lazy:!0}),Forms=findByProps("Form","FormSection",{lazy:!0}),SVG=findByProps("Svg","Path",{lazy:!0}),Navigation=findByProps("useNavigation",{lazy:!0}),Components=Object.freeze({__proto__:null,Native:Native,Forms:Forms,SVG:SVG,Navigation:Navigation});function findInTree(e={},t=e=>e,{ignore:r=[],walkable:n=[],maxProperties:o=100}={}){for(var i=[e],a=function(...e){try{return Reflect.apply(t,this,e)}catch{return!1}};i.length&&o;){var s=i.shift();if(a(s))return s;if(Array.isArray(s))i.push(...s);else if("object"==typeof s&&null!==s){if(n.length)for(var l in s){var c=s[l];~n.indexOf(l)&&!~r.indexOf(l)&&i.push(c)}else for(var u in s){var f=s[u];s&&~r.indexOf(u)||i.push(f)}}o--}}function findInReactTree(e,t=e=>e,r={}){return findInTree(e,t,{walkable:["props","children"],...r})}function capitalize(e){if("string"!=typeof e)throw TypeError("capitalize's first argument must be of type string");return e.charAt(0).toUpperCase()+e.slice(1)}function debounce(e,t){var r;return function(...n){clearTimeout(r),r=setTimeout(()=>e.apply(this,n),t)}}var Colors={red:"\x1b[31m",reset:"\x1b[0m",green:"\x1b[32m",gray:"\x1b[90m",blue:"\x1b[34m",yellow:"\x1b[33m"};function colorize(e,t="reset"){return Colors[t.toLowerCase()]+e+Colors.reset}function isEmpty(e){for(var t in e)return!1;return!0}function uuid(e=30){var t="";do{var r=16*Math.random()|0;t+=(12==t.length?4:16==t.length?3&r|8:r).toString(16)}while(t.length<e);return t}!function(e){e.Before="before",e.Instead="instead",e.After="after"}(Type||(Type={}));var patches=[];function before(e,t,r,n,o=!1){return patch(e,t,r,n,Type.Before,o)}function instead(e,t,r,n,o=!1){return patch(e,t,r,n,Type.Instead,o)}function after(e,t,r,n,o=!1){return patch(e,t,r,n,Type.After,o)}function createPatcher(e){return{getPatchesByCaller,before:(t,r,n,o=!1)=>before(e,t,r,n,o),instead:(t,r,n,o=!1)=>instead(e,t,r,n,o),after:(t,r,n,o=!1)=>after(e,t,r,n,o),unpatchAll:()=>unpatchAll(e)}}function getPatchesByCaller(e){if(!e)return[];var t=[];for(var r of patches)for(var n of[...r.patches.before,...r.patches.instead,...r.patches.after])e&&n.caller!==e||t.push(n);return t}function unpatchAll(e){var t=getPatchesByCaller(e);if(t.length)for(var r of t)r.unpatch()}function override(e){return function(){if(!e?.patches?.before.length&&!e?.patches?.after.length&&!e?.patches?.instead.length&&!patches.find(t=>t.mdl===e.mdl&&t.func===e.func))return e.unpatch(),new.target?new e.original(...arguments):e.original.apply(this,arguments);for(var t,r=arguments,n=[...e.patches.before],o=0;o<n.length;o++){var i=n[o];if(i)try{var a=i.callback(this,r,e.original.bind(this));Array.isArray(a)&&(r=a),i.once&&i.unpatch()}catch(s){console.error(`Could not fire before patch for ${e.func} of ${i.caller}`,s)}}var l=[...e.patches.instead];if(l.length)for(var c=0;c<l.length;c++){var u=l[c];if(u)try{var f=u.callback(this,r,e.original.bind(this));void 0!==f&&(t=f),u.once&&u.unpatch()}catch(d){console.error(`Could not fire instead patch for ${e.func} of ${u.caller}`,d)}}else t=new.target?new e.original(...r):e.original.apply(this,r);for(var h=[...e.patches.after],p=0;p<h.length;p++){var m=h[p];if(m)try{var g=m.callback(this,r,t,e=>t=e);void 0!==g&&(t=g),m.once&&m.unpatch()}catch(y){console.error(`Could not fire after patch for ${e.func} of ${m.caller}`,y)}}return t}}function push(e,t){"renderPatched"===t&&(e[t]=function(...t){return new.target?new e(...t):e.apply(this,t)});var r={mdl:e,func:t,original:e[t],unpatch(){"renderPatched"===r.func?delete r.mdl.renderPatched:r.mdl[r.func]=r.original,r.patches={before:[],after:[],instead:[]}},patches:{before:[],after:[],instead:[]}},n=override(r);e[t]=n;var o=Object.getOwnPropertyDescriptors(r.original);return delete o.length,Object.defineProperties(e[t],{...o,toString:{value:()=>r.original.toString(),configurable:!0,enumerable:!1},__original:{value:r.original,configurable:!0,enumerable:!1}}),patches.push(r),r}function get$1(e,t){return patches.find(r=>r.mdl===e&&r.func===t)||push(e,t)}function patch(e,t,r,n,o=Type.After,i=!1){if(e&&"string"==typeof e){if(t&&["function","object"].includes(typeof t)){if(r&&"string"==typeof r){if(n&&"function"==typeof n){if(!o||"string"!=typeof o||!["after","before","instead"].includes(o))throw TypeError('fifth argument "type" must be of type string and any of the three: after, before, instead')}else throw TypeError('fourth argument "callback" must be of type function')}else throw TypeError('third argument "func" must be of type string')}else throw TypeError('second argument "mdl" must be of type function or object')}else throw TypeError('first argument "caller" must be of type string');var a=get$1(t,r),s={caller:e,once:i,type:o,id:a.patches?.[o]?.length??0,callback:n,unpatch(){var e=a.patches?.[o].findIndex(e=>e.id===s.id);if(~e&&a.patches?.[o].splice(e,1),!a.patches?.before.length&&!a.patches?.after.length&&!a.patches?.instead.length){var n=patches.findIndex(e=>e.mdl==t&&e.func==r);n&&(patches[n]?.unpatch(),patches.splice(n,1))}}};return a.patches[o]??=[],a.patches[o].push(s),s.unpatch}var Patcher$2={createPatcher,before,instead,after,unpatchAll,patches},assets=new Set,registry=findByProps("registerAsset");Patcher$2.after("enmity-assets",registry,"registerAsset",(e,[t],r)=>{Object.assign(t,{id:r}),assets.add(t)});for(var id=1;;id++){var asset=registry.getAssetByID(id);if(!asset)break;assets.has(asset)||(Object.assign(asset,{id}),assets.add(asset))}function find(e){return Object.values(assets).find(e)}function getByName$1(e,t="png"){return[...assets].find(r=>r.name===e&&r.type===t)}function getByID(e){return registry.getAssetByID(e)}function getIDByName(e,t="png"){return getByName$1(e,t)?.id}var Icons=new Proxy({},{get:(e,t)=>getIDByName(t)}),Assets={assets,getByName:getByName$1,getByID,getIDByName},assets$1=Object.freeze({__proto__:null,assets:assets,registry:registry,find:find,getByName:getByName$1,getByID:getByID,getIDByName:getIDByName,Icons:Icons,default:Assets});function _extends$2(){return(_extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var{ThemeColorMap:ThemeColorMap$4}=Constants,styles$3=StyleSheet.createThemedStyleSheet({icon:{color:ThemeColorMap$4.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});function palette({height:e,width:t,color:r=styles$3.icon.color,...n}){return React.createElement(SVG.Svg,_extends$2({viewBox:"0 0 24 24",style:{height:e,width:t,...styles$3.icon,color:r},fill:"currentColor"},n),React.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(SVG.Path,{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}))}function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var{ThemeColorMap:ThemeColorMap$3}=Constants,styles$2=StyleSheet.createThemedStyleSheet({icon:{color:ThemeColorMap$3.INTERACTIVE_NORMAL,opacity:.75,marginLeft:.5}});function puzzle({height:e,width:t,color:r=styles$2.icon.color,...n}){return React.createElement(SVG.Svg,_extends$1({viewBox:"0 0 24 24",style:{height:e,width:t,...styles$2.icon,color:r},fill:"currentColor"},n),React.createElement(SVG.Path,{d:"M0 0h24v24H0z",fill:"none"}),React.createElement(SVG.Path,{d:"M20.5 11H19V7c0-1.1-.9-2-2-2h-4V3.5C13 2.12 11.88 1 10.5 1S8 2.12 8 3.5V5H4c-1.1 0-1.99.9-1.99 2v3.8H3.5c1.49 0 2.7 1.21 2.7 2.7s-1.21 2.7-2.7 2.7H2V20c0 1.1.9 2 2 2h3.8v-1.5c0-1.49 1.21-2.7 2.7-2.7 1.49 0 2.7 1.21 2.7 2.7V22H17c1.1 0 2-.9 2-2v-4h1.5c1.38 0 2.5-1.12 2.5-2.5S21.88 11 20.5 11z"}))}var Invite="enmity",Links={GitHub:"https://github.com/enmity-mod",Twitter:"https://twitter.com/EnmityApp"},Invites=findByProps("acceptInviteAndTransitionToInviteChannel",{lazy:!0}),Actions=Object.freeze({__proto__:null,Invites:Invites});function createStore(e){var t=new Set,r=Object.freeze({getState:(t=e=>e)=>t(e),setState(r){var n="function"==typeof r?r(e):r;if(!Object.is(e,n))for(var o of(e=Object.assign({},e,n),t))try{o(e)}catch{console.error("Failed to fire listener in zustand store.")}},addListener(e){if(!t.has(e))return t.add(e),()=>t.delete(e)},removeListener:e=>t.delete(e),get listeners(){return t}});function n(e=e=>e){var[,n]=React.useReducer(e=>e+1,0);return React.useEffect(()=>{var e=()=>n();return t.add(e),()=>void t.delete(e)},[]),r.getState(e)}return Object.assign(n,r,{*[Symbol.iterator](){yield r,yield n}}),n}var[store,useStore$1]=createStore({logs:[]});function addLog({message:e,level:t}){store.setState(r=>({logs:[...r.logs,{time:Date.now(),message:e,level:t}]}))}var Logger$1={store,useStore:useStore$1},{ThemeColorMap:ThemeColorMap$2,Fonts:Fonts$1}=Constants;function Logs(){var e=Navigation.useNavigation(),t=Logger$1.useStore();return React.useEffect(()=>{e.setOptions({headerRight:HeaderRight})},[]),React.createElement(Forms.FormSection,{style:{flex:1}},React.createElement(ReactNative.FlatList,{data:t.logs.sort((e,t)=>e.time-t.time),keyExtractor:(e,t)=>String(t),ListEmptyComponent:()=>React.createElement(ReactNative.Text,null,"nothing here!"),ItemSeparatorComponent:Forms.FormDivider,renderItem({item:e}){var t=StyleSheet.createThemedStyleSheet({log:{fontSize:16,fontFamily:Fonts$1.DISPLAY_SEMIBOLD,color:(()=>{switch(e.level){case 1:return ThemeColorMap$2.TEXT_NORMAL;case 0:return ThemeColorMap$2.TEXT_MUTED;case 2:return"yellow";case 3:return"red"}})()},time:{fontSize:16,fontFamily:Fonts$1.DISPLAY_SEMIBOLD,color:ThemeColorMap$2.TEXT_MUTED}});return React.createElement(Forms.FormRow,{label:()=>React.createElement(ReactNative.Text,{style:t.log},e.message),subLabel:Moment(e.time).format("HH:mm:ss.SSS")})}}))}var styles$1=StyleSheet.createThemedStyleSheet({touchable:{marginRight:10},image:{tintColor:ThemeColorMap$2.TEXT_NORMAL}});function HeaderRight(){return React.createElement(ReactNative.TouchableOpacity,{style:styles$1.touchable,onPress:()=>Logger$1.store.setState({logs:[]})},React.createElement(ReactNative.Image,{style:styles$1.image,source:Assets.getIDByName("ic_input_clear_24px")}))}function Developer(){var e=Navigation.useNavigation(),t={Debug:Assets.getIDByName("debug")};return React.createElement(React.Fragment,null,React.createElement(Forms.FormSection,{title:i18n$1.Messages.ENMITY_DEBUG_BRIDGE},React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_DEBUG_BRIDGE_CONNECT,trailing:React.createElement(Forms.FormSwitch,{value:!0,onValueChange(){}})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormInput,{value:"192.168.0.35:9090",title:i18n$1.Messages.ENMITY_DEBUG_BRIDGE_IP})),React.createElement(Forms.FormSection,null,React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_ASSET_BROWSER,leading:React.createElement(Forms.FormRow.Icon,{source:t.Debug}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push("Custom",{title:i18n$1.Messages.ENMITY_DEBUG_LOGS,render:Logs})}),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_DEBUG_LOGS,leading:React.createElement(Forms.FormRow.Icon,{source:t.Debug}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push("Custom",{title:i18n$1.Messages.ENMITY_DEBUG_LOGS,render:Logs})})))}var utilities=Object.freeze({__proto__:null,findInReactTree:findInReactTree,capitalize:capitalize,findInTree:findInTree,debounce:debounce,colorize:colorize,isEmpty:isEmpty,uuid:uuid});function asyncGeneratorStep$4(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){r(c);return}s.done?t(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator$4(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep$4(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep$4(i,n,o,a,s,"throw",e)}a(void 0)})}}var Events=new EventEmitter,{DCDFileManager}=ReactNative.NativeModules,{Platform}=ReactNative,makePath=Platform.select({ios:e=>"Documents/Enmity/"+e,default:e=>"Enmity/"+e}),listeners={},settings=globalThis.ENMITY_SETTINGS??{};function get(e,t,r){return settings[e]?.[t]??r}function set(e,t,r){settings[e]??={},settings[e][t]=r,Events.emit("changed",{store:e,key:t,value:r})}function remove(e,t){delete settings[e][t],isEmpty(settings[e])&&delete settings[e],Events.emit("changed",{store:e,key:t})}function makeStore(e){return{set:(t,r)=>set(e,t,r),get:(t,r)=>get(e,t,r),remove:t=>remove(e,t),useStore:()=>useStore(e)}}function useStore(e){var[,t]=React.useState({});React.useEffect(()=>{function r(r){r.store===e&&t({})}return Events.on("changed",r),()=>void Events.off("changed",r)},[])}function onChange$1(){return _onChange$1.apply(this,arguments)}function _onChange$1(){return(_onChange$1=_asyncToGenerator$4(function*(){DCDFileManager.writeFile("documents",makePath("settings.json"),JSON.stringify(settings),"utf8")})).apply(this,arguments)}Events.on("changed",debounce(onChange$1,250));var storage=Object.freeze({__proto__:null,listeners:listeners,settings:settings,get:get,set:set,remove:remove,makeStore:makeStore,useStore:useStore});function _assertThisInitialized$3(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep$3(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){r(c);return}s.done?t(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator$3(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep$3(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep$3(i,n,o,a,s,"throw",e)}a(void 0)})}}function _classCallCheck$3(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties$1(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass$1(e,t,r){return t&&_defineProperties$1(e.prototype,t),r&&_defineProperties$1(e,r),e}function _getPrototypeOf$3(e){return(_getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$3(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$3(e,t)}function _possibleConstructorReturn$3(e,t){return t&&("object"===_typeof$3(t)||"function"==typeof t)?t:_assertThisInitialized$3(e)}function _setPrototypeOf$3(e,t){return(_setPrototypeOf$3=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$3=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$3(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$3(e){var t=_isNativeReflectConstruct$3();return function(){var r,n=_getPrototypeOf$3(e);if(t){var o=_getPrototypeOf$3(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$3(this,r)}}!function(e){e.Plugins="plugin",e.Themes="theme"}(ManagerType||(ManagerType={}));var Manager=function(EventEmitter){_inherits$3(Manager,EventEmitter);var _super=_createSuper$3(Manager);function Manager(e){var t;return _classCallCheck$3(this,Manager),(t=_super.call(this)).entities=new Map,t.started=new Set,t.type=e,t.name=capitalize(e)+"s",t.logger=createLogger("Manager",t.name),t.settings=makeStore(`${e}-states`),t}var _proto=Manager.prototype;return _proto.install=function(e){var t=this;return _asyncToGenerator$3(function*(){t.logger.debug(`Fetching ${e} for manifest...`);var r=yield fetch(e,{cache:"no-cache"}).then(e=>e.json());t.logger.debug(`Fetching bundle from ${r.bundle}...`);var n=yield fetch(r.bundle,{cache:"no-cache"}).then(e=>e.text());t.logger.debug("Done fetching..."),t.load(n,r)})()},_proto.load=function(e,t){var r={failed:!1,instance:null};try{var n=this.handleBundle(e);n||this.handleInvalidBundle(),r.instance=n}catch(o){this.logger.error(`Failed to execute ${t.id}:`,o.message),r.failed=!0}var i={data:t,instance:r.instance,started:!1};this.entities.set(t.id,i),this.settings.get(t.id,!1)&&this.start(i)},_proto.start=function(e){var t=this.resolve(e);if(t)try{t.instance.start?.(),t.started=!0}catch(r){this.logger.error(`Failed to start ${t.data.id}:`,r.message),t.started=!1}},_proto.stop=function(e){var t=this.resolve(e);if(t)try{t.instance.stop?.(),t.started=!1}catch(r){this.logger.error(`Failed to stop ${t.data.id}:`,r.message),t.started=!0}},_proto.unload=function(e){var t=this.resolve(e);if(t)try{this.stop(t),this.entities.delete(t.id),this.emit("updated")}catch(r){this.logger.error(`FATAL: ${t.id} was not able to unload properly, a full app restart is recommended.`,r)}},_proto.shutdown=function(){for(var e of this.addons)try{this.unload(e)}catch(t){this.logger.error(`Failed to stop ${e.id}. Skipping.`,t.message);continue}},_proto.handleBundle=function handleBundle(bundle){return eval(bundle)},_proto.handleInvalidBundle=function(){throw Error("Bundle didn't return an instance.")},_proto.resolve=function(e){if(e.instance)return e;var t=this.entities.get(e);if(t)return t;var r=[...this.entities.values()].find(t=>t.data.name===e);if(r)return r},_createClass$1(Manager,[{key:"addons",get:function(){return[...this.entities.values()]}}]),Manager}(EventEmitter);function _assertThisInitialized$2(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _classCallCheck$2(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _getPrototypeOf$2(e){return(_getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$2(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$2(e,t)}function _possibleConstructorReturn$2(e,t){return t&&("object"===_typeof$2(t)||"function"==typeof t)?t:_assertThisInitialized$2(e)}function _setPrototypeOf$2(e,t){return(_setPrototypeOf$2=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$2=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$2(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$2(e){var t=_isNativeReflectConstruct$2();return function(){var r,n=_getPrototypeOf$2(e);if(t){var o=_getPrototypeOf$2(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$2(this,r)}}var Plugins$1=function(e){_inherits$2(r,e);var t=_createSuper$2(r);function r(){return _classCallCheck$2(this,r),t.call(this,ManagerType.Plugins)}return _createClass(r,[{key:"addons",get:function(){return[{started:!1,instance:{start(){},stop(){}},id:"123.1",failed:!0,data:{name:"Show Hidden Channels",id:"123.1",bundle:"123.1",description:"Displays all hidden channels which can't be accessed, this won't allow you to read them.",version:"1.0.0",authors:[{name:"eternal",id:"226677096091484160"}]}}]}}]),r}(Manager),Plugins$2=new Plugins$1,Patcher$1=createPatcher("components"),unknown=new Set,named=new Map;function add$1(e,t){named.get(e)||named.set(e,t)}function getAll(){return{named:Object.fromEntries(named.entries()),unknown:[...unknown.values()]}}function getByName(e){return named.get(e)}function forceUpdateApp(){return Dispatcher.dispatch({type:"FORCE_UPDATE_APP"})}Patcher$1.before(React,"createElement",(e,t)=>{var r=t[0];return r.displayName?add$1(r.displayName,r):r.name?add$1(r.name,r):r.type?.name?add$1(r.type.name,r):r.type?.displayName?add$1(r.type.displayName,r):r.render?.displayName?add$1(r.render.displayName,r):r.render?.name?add$1(r.render.name,r):unknown.add(r),"function"==typeof r&&void 0!==r.renderPatched&&(t[0]=r.renderPatched),t}),Patcher$1.after(React,"createElement",(e,t,r)=>{function n(e){if(e?.type&&"string"!=typeof e.type){var t=e.type;t.displayName?add$1(t.displayName,t):t.name?add$1(t.name,t):t.type?.name?add$1(t.type.name,t):t.type?.displayName?add$1(t.type.displayName,t):t.render?.displayName?add$1(t.render.displayName,t):t.render?.name?add$1(t.render.name,t):unknown.add(t);var{children:r}=e.props||{};for(var o of r?Array.isArray(r)?r:[r]:[])n(o)}}r&&n(r)});var components=Object.freeze({__proto__:null,add:add$1,getAll:getAll,getByName:getByName,forceUpdateApp:forceUpdateApp});function _assertThisInitialized$1(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _classCallCheck$1(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _getPrototypeOf$1(e){return(_getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits$1(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf$1(e,t)}function _possibleConstructorReturn$1(e,t){return t&&("object"===_typeof$1(t)||"function"==typeof t)?t:_assertThisInitialized$1(e)}function _setPrototypeOf$1(e,t){return(_setPrototypeOf$1=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof$1=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct$1(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper$1(e){var t=_isNativeReflectConstruct$1();return function(){var r,n=_getPrototypeOf$1(e);if(t){var o=_getPrototypeOf$1(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn$1(this,r)}}var Themes$1=function(e){_inherits$1(r,e);var t=_createSuper$1(r);function r(){var e;return _classCallCheck$1(this,r),(e=t.call(this,ManagerType.Themes)).initialize(),e}var n=r.prototype;return n.load=function(e,t){var r={failed:!1,instance:null};try{var n=this.handleBundle(e);n||this.handleInvalidBundle(),r.instance=n}catch(o){this.logger.error(`Failed to execute ${t.id}:`,o.message),r.failed=!0}var i={data:t,instance:r.instance,started:!1};this.entities.set(t.id,i),this.settings.get(t.id,!1)&&this.start(i)},n.start=function(e){var t=this.resolve(e);t&&(Object.assign(Constants.ThemeColorMap,t.instance.main),Object.assign(Constants.Colors,t.instance.native),Object.assign(Constants.UNSAFE_Colors,t.instance.misc),this.emit("applied",t),forceUpdateApp(),this.logger.log(`${t.id} started.`))},n.initialize=function(){this.entities.set("eternal.dark-discord",{started:!1,instance:{main:{KEYBOARD:["#111111","#FFFFFF"],HEADER_PRIMARY:["#FBFBFB","#060607"],HEADER_SECONDARY:["#B6B6B6","#4f5660"],TEXT_NORMAL:["#FBFBFB","#2e3338"],TEXT_MUTED:["#B6B6B6","#747f8d"],INTERACTIVE_NORMAL:["#C8C8C8","#4f5660"],INTERACTIVE_HOVER:["#DCDDDE","#2e3338"],INTERACTIVE_ACTIVE:["#FFFFFF","#060607"],INTERACTIVE_MUTED:["#747474","#c7ccd1"],BACKGROUND_PRIMARY:["#141414","#ffffff"],BACKGROUND_SECONDARY:["#111111","#f2f3f5"],BACKGROUND_SECONDARY_ALT:["#0e0e0e","#ebedef"],BACKGROUND_TERTIARY:["#0E0E0E","#e3e5e8"],BACKGROUND_ACCENT:["#292929","#747f8d"],BACKGROUND_FLOATING:["#090909","#FFFFFF"],BACKGROUND_MOBILE_PRIMARY:["#141414","#f8f9f9"],BACKGROUND_MOBILE_SECONDARY:["#111111","#ffffff"],BACKGROUND_NESTED_FLOATING:["#111111","#ffffff"],BACKGROUND_MESSAGE_HOVER:["rgba(255, 255, 255, 0.02)","#FFFFFF"],BACKGROUND_MODIFIER_HOVER:["rgba(255, 255, 255, 0.02)","hsla(214, 9.9%, 50.4%, 0.08)"],BACKGROUND_MODIFIER_ACTIVE:["rgba(255, 255, 255, 0.03)","hsla(214, 9.9%, 50.4%, 0.16)"],BACKGROUND_MODIFIER_SELECTED:["rgba(255, 255, 255, 0.04)","hsla(214, 9.9%, 50.4%, 0.24)"],BACKGROUND_MODIFIER_ACCENT:["rgba(255, 255, 255, 0.06)","hsla(240, 7.7%, 2.5%, 0.08)"],SCROLLBAR_THIN_THUMB:["#292929","hsla(217, 7.6%, 33.5%, 0.3)"],SCROLLBAR_THIN_TRACK:["transparent","hsla(0, 0%, 0%, 0)"],SCROLLBAR_AUTO_THUMB:["#292929","#cccccc"],SCROLLBAR_AUTO_TRACK:["rgba(0, 0, 0, 0.1)","#f2f2f2"],CHANNELTEXTAREA_BACKGROUND:["transparent","#ebedef"],CHANNEL_ICON:["#B6B6B6","#6a7480"],CHANNELS_DEFAULT:["#B6B6B6","#6a7480"]},native:{PRIMARY_DARK:"#747474",PRIMARY_DARK_100:"#FFFFFF",PRIMARY_DARK_200:"#FFFFFF",PRIMARY_DARK_300:"#B6B6B6",PRIMARY_DARK_360:"#C8C8C8",PRIMARY_DARK_400:"#585858",PRIMARY_DARK_500:"#292929",PRIMARY_DARK_600:"#111111",PRIMARY_DARK_630:"#1F1F1F",PRIMARY_DARK_700:"#090909",PRIMARY_DARK_800:"#090909",PRIMARY_DARK_900:"#090909"},misc:{CHAT_GREY:"#111111"}},id:"eternal.dark-discord",failed:!1,data:{name:"Dark Discord",id:"eternal.dark-discord",description:"black",version:"1.0.0",bundle:"http://192.168.0.35:8080/theme/theme.json",authors:[{name:"eternal",id:"263689920210534400"}]}}),this.original={main:{...Constants.ThemeColorMap},native:{...Constants.Colors},misc:{...Constants.UNSAFE_Colors}},Patcher$2.after("themes",StyleSheet,"createThemedStyleSheet",(e,t,r)=>{this.on("applied",()=>{var{mergedDarkStyles:e,mergedLightStyles:n}=StyleSheet.getThemedStylesheet(...t);Object.assign(r,"dark"===Theme.theme?e:n)})})},n.handleBundle=function(e){return JSON.parse(e)},r}(Manager),Themes$2=new Themes$1,{ThemeColorMap:ThemeColorMap$1}=Constants,styles=StyleSheet.createThemedStyleSheet({trailingText:{color:ThemeColorMap$1.TEXT_MUTED},container:{marginBottom:50}});function General(){var e=Navigation.useNavigation(),t={Twitter:Assets.getIDByName("img_account_sync_twitter_white"),GitHub:Assets.getIDByName("img_account_sync_github_white"),Development:Assets.getIDByName("ic_progress_wrench_24px"),Toasts:Assets.getIDByName("ic_notification_settings"),Discord:Assets.getIDByName("Discord")};return React.createElement(ReactNative.ScrollView,null,React.createElement(ReactNative.KeyboardAvoidingView,{enabled:!0,behavior:"position",style:styles.container,keyboardVerticalOffset:100,contentContainerStyle:{backfaceVisibility:"hidden"}},React.createElement(Forms.FormSection,null,React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_TOAST_SETTINGS,leading:React.createElement(Forms.FormRow.Icon,{source:t.Toasts}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push("Custom",{title:i18n$1.Messages.ENMITY_TOAST_SETTINGS,render:Developer})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_DEVELOPMENT_SETTINGS,leading:React.createElement(Forms.FormRow.Icon,{source:t.Development}),trailing:Forms.FormRow.Arrow,onPress:()=>e.push("Custom",{title:i18n$1.Messages.ENMITY_DEVELOPMENT_SETTINGS,render:Developer})})),React.createElement(Forms.FormSection,{title:"Stats"},React.createElement(Forms.FormRow,{label:"Installed Plugins",leading:React.createElement(puzzle,{width:24,height:24}),trailing:()=>React.createElement(ReactNative.Text,{style:styles.trailingText},Plugins$2.addons.length)}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:"Installed Themes",leading:React.createElement(palette,{width:24,height:24}),trailing:()=>React.createElement(ReactNative.Text,{style:styles.trailingText},Themes$2.addons.length)})),React.createElement(Forms.FormSection,{title:"Links"},React.createElement(Forms.FormRow,{label:"Discord Server",leading:React.createElement(Forms.FormRow.Icon,{source:t.Discord}),trailing:Forms.FormRow.Arrow,onPress:()=>Invites.acceptInviteAndTransitionToInviteChannel({inviteKey:Invite})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:"GitHub",leading:React.createElement(Forms.FormRow.Icon,{source:t.GitHub}),trailing:Forms.FormRow.Arrow,onPress:()=>ReactNative.Linking.openURL(Links.GitHub)}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:"Twitter",leading:React.createElement(Forms.FormRow.Icon,{source:t.Twitter}),trailing:Forms.FormRow.Arrow,onPress:()=>ReactNative.Linking.openURL(Links.Twitter)}))))}var AsyncUsers=findByProps("fetchProfile",{lazy:!0}),API$1=Object.freeze({__proto__:null,AsyncUsers:AsyncUsers});function _assertThisInitialized(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function asyncGeneratorStep$2(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){r(c);return}s.done?t(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator$2(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep$2(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep$2(i,n,o,a,s,"throw",e)}a(void 0)})}}function _classCallCheck(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _possibleConstructorReturn(e,t){return t&&("object"===_typeof(t)||"function"==typeof t)?t:_assertThisInitialized(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _typeof=function(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,n=_getPrototypeOf(e);if(t){var o=_getPrototypeOf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return _possibleConstructorReturn(this,r)}}var{ThemeColorMap,Fonts}=Constants,_class=function(e){_inherits(r,e);var t=_createSuper(r);function r(){var e;return _classCallCheck(this,r),e=t.apply(this,arguments),e.styles=StyleSheet.createThemedStyleSheet({card:{backgroundColor:ThemeColorMap.BACKGROUND_SECONDARY,marginHorizontal:10,borderRadius:5,marginTop:10},header:{backgroundColor:ThemeColorMap.BACKGROUND_TERTIARY,borderTopRightRadius:5,borderTopLeftRadius:5,paddingHorizontal:15,flexDirection:"row",alignItems:"center",padding:10,flex:1},name:{color:ThemeColorMap.TEXT_NORMAL,fontFamily:Fonts.PRIMARY_BOLD,marginRight:2.5,fontSize:16},version:{fontFamily:Fonts.PRIMARY_SEMIBOLD,color:ThemeColorMap.TEXT_MUTED,marginRight:2.5,fontSize:14},by:{fontFamily:Fonts.PRIMARY_NORMAL,color:ThemeColorMap.TEXT_MUTED,marginRight:2.5,fontSize:14},authors:{fontFamily:Fonts.PRIMARY_SEMIBOLD,color:ThemeColorMap.TEXT_MUTED,fontSize:14,flex:1},authorContainer:{flexDirection:"row"},touchable:{color:ThemeColorMap.TEXT_NORMAL},info:{padding:15},description:{fontFamily:Fonts.PRIMARY_SEMIBOLD,color:ThemeColorMap.TEXT_NORMAL,fontSize:14}}),e}var n=r.prototype;return n.render=function(){return React.createElement(ReactNative.View,{style:this.styles.card},React.createElement(ReactNative.View,{style:this.styles.header},this.renderMetadata(),this.renderAuthors(),React.createElement(ReactNative.Switch,null)),React.createElement(ReactNative.View,{style:this.styles.info},this.renderBody()))},n.renderMetadata=function(){var{addon:e}=this.props;return React.createElement(React.Fragment,null,React.createElement(ReactNative.Text,{style:this.styles.name},e.data.name),React.createElement(ReactNative.Text,{style:this.styles.version},e.data.version))},n.renderAuthors=function(){var{addon:e}=this.props;return React.createElement(React.Fragment,null,React.createElement(ReactNative.Text,{style:this.styles.by},"by"),React.createElement(ReactNative.FlatList,{data:e.data.authors,horizontal:!0,style:{flex:1},keyExtractor:(e,t)=>String(t),renderItem:({item:t,index:r})=>{var n=r!==e.data.authors.length-1&&React.createElement(ReactNative.Text,{style:this.styles.authors},", ");return t.name&&t.id?React.createElement(ReactNative.TouchableOpacity,{style:this.styles.authorContainer,onPress:this.onTapAuthor.bind(this,t)},React.createElement(ReactNative.Text,{style:{...this.styles.authors,...this.styles.touchable}},t.name),n):React.createElement(ReactNative.View,{style:this.styles.authorContainer},React.createElement(ReactNative.Text,{style:this.styles.authors},t.name??t),n)}}))},n.renderBody=function(){var{addon:e}=this.props;return React.createElement(ReactNative.Text,{style:this.styles.description},e.data.description)},n.onTapAuthor=function(e){return _asyncToGenerator$2(function*(){Users.getUser(e.id)||(yield AsyncUsers.fetchProfile(e.id)),Profiles.showUserProfile({userId:e.id})})()},r}(React.Component),Search=findByName("StaticSearchBarContainer");function Addons({addons:e,type:t}){var[r,n]=React.useState(""),o=r?[]:e;if(r)for(var i of e)(i.data.name.toLowerCase().includes(r)||i.data.description.toLowerCase().includes(r)||i.data.authors.some(e=>"string"==typeof e?e.includes(r):e.name.includes(r)))&&o.push(i);return React.createElement(ReactNative.SafeAreaView,{style:{flex:1}},React.createElement(ReactNative.View,{style:{flex:1}},React.createElement(Search,{placeholder:i18n$1.Messages[`ENMITY_SEARCH_${t.toUpperCase()}`],onChangeText:e=>n(e),onClear:()=>n(""),value:r}),React.createElement(ReactNative.FlatList,{data:o,renderItem:e=>React.createElement(_class,{addon:e.item}),keyExtractor:(e,t)=>String(t)})))}var Plugins=()=>{var e=Navigation.useNavigation();return React.useEffect(()=>{e.setOptions({headerRight:()=>React.createElement(Add$1,null)})},[]),React.createElement(ReactNative.View,{style:{flex:1}},React.createElement(Addons,{type:"plugins",addons:Plugins$2.addons}))};function Add$1(){return React.createElement(ReactNative.Text,{style:{color:"white",marginRight:15},onPress:()=>console.log("hio")},"Add")}var Themes=()=>{var e=Navigation.useNavigation();return React.useEffect(()=>{e.setOptions({headerRight:()=>React.createElement(Add,null)})},[]),React.createElement(ReactNative.View,{style:{flex:1}},React.createElement(Addons,{type:"themes",addons:Themes$2.addons}))};function Add(){return React.createElement(ReactNative.Text,{style:{color:"white",marginRight:15},onPress:()=>console.log("hio")},"Add")}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Patcher=createPatcher("Core - Settings"),Settings=findByName("UserSettingsOverviewWrapper",{interop:!1}),Scenes=findByName("getScreens",{interop:!1});function initialize$2(){var e=Patcher.after(Settings,"default",(t,r,n)=>{var o=findInReactTree(n,e=>e.type?.name==="UserSettingsOverview");if(!o)return n;patchSettings(o),e()});Patcher.after(Scenes,"default",(e,t,r)=>({...r,Enmity:{key:"Enmity",title:"Enmity",render:General},EnmityPlugins:{key:"EnmityPlugins",render:Plugins,get title(){return i18n$1.Messages.ENMITY_PLUGINS}},EnmityThemes:{key:"EnmityThemes",render:Themes,get title(){return i18n$1.Messages.ENMITY_THEMES}},EnmityUpdater:{key:"EnmityUpdater",render:()=>null,get title(){return i18n$1.Messages.ENMITY_UPDATER}},Custom:{key:"Custom",title:"Page",render({title:e,render:t,...r}){var n=Navigation.useNavigation();return React.useEffect(()=>{e&&n.setOptions({title:e})},[]),React.createElement(t,_extends({},r))}}}))}function patchSettings(e){Patcher.after(e.type.prototype,"render",(e,t,r)=>{var{navigation:n}=e.props,{children:o}=r.props,i=[i18n$1.Messages.BILLING_SETTINGS,i18n$1.Messages.PREMIUM_SETTINGS],a=o.findIndex(e=>~i.indexOf(e.props.title));o.splice(-1===a?4:a,0,React.createElement(React.Fragment,null,React.createElement(Forms.FormSection,{key:"Enmity",title:"Enmity"},React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_GENERAL,leading:React.createElement(Forms.FormRow.Icon,{source:{uri:"https://files.enmity.app/icon-64.png"}}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push("Enmity",{...e.props,...r.props})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_PLUGINS,leading:React.createElement(puzzle,{height:24,width:24}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push("EnmityPlugins",{...e.props,...r.props})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_THEMES,leading:React.createElement(palette,{height:24,width:24}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push("EnmityThemes",{...e.props,...r.props})}),React.createElement(Forms.FormDivider,null),React.createElement(Forms.FormRow,{label:i18n$1.Messages.ENMITY_UPDATER,leading:React.createElement(Forms.FormRow.Icon,{source:Icons.ic_download_24px}),trailing:React.createElement(Forms.FormArrow,null),onPress:()=>n.push("EnmityUpdater",{...e.props,...r.props})}))));var s=o.find(e=>e.props.title===i18n$1.Messages.SUPPORT),l=s?.props.children;l&&(s.props.children=l.filter(e=>e?.type?.name!=="UploadLogsButton"))}),Patcher.after(e.type.prototype,"renderChangeLog",(e,t,r)=>{Array.isArray(r.props.children)||(r.props.children=[r.props.children]);var[n]=r.props.children,{navigation:o}=e.props;n.props.label+=" - Discord",r.props.children.push(React.createElement(Forms.FormRow,{leading:React.createElement(Forms.FormRow.Icon,{source:Icons.ic_info_24px}),label:i18n$1.Messages.WHATS_NEW+" - Enmity",onPress:()=>o.push("EnmityChangelog",{...e.props,...r.props})}))})}function shutdown$2(){Patcher.unpatchAll()}var Settings$1={initialize:initialize$2,shutdown:shutdown$2},Util=findByProps("inspect",{lazy:!0});!function(e){e[e.error=3]="error",e[e.info=1]="info",e[e.log=1]="log",e[e.warn=2]="warn",e[e.trace=0]="trace",e[e.debug=0]="debug"}(Levels||(Levels={}));var methods=["error","info","log","warn","trace","debug"];function initialize$1(){var e=function(e){console[e].__ORIGINAL__=console[e],console[e]=(...t)=>{for(var r=[],n=0,o=t.length;o>n;n++)r.push("string"==typeof t[n]?t[n]:Util.inspect(t[n]));for(var i="",a=0,s=r.length;s>a;a++)i+=`${r[a]} `;addLog({message:i,level:Levels[e]}),nativeLoggingHook(i,Levels[e]??Levels.info)}};for(var t of methods)e(t)}function shutdown$1(){for(var e of methods){var t=console[e].__ORIGINAL__;t&&(console[e]=t)}}var Console={initialize:initialize$1,shutdown:shutdown$1},managers=Object.freeze({__proto__:null,plugins:Plugins$2,themes:Themes$2}),toasts={},ENMITY_GENERAL="General",ENMITY_PLUGINS="Plugins",ENMITY_THEMES="Themes",ENMITY_UPDATER="Updater",ENMITY_DEBUG_LOGS="Debug Logs",ENMITY_SEARCH_PLUGINS="Search plugins...",ENMITY_SEARCH_THEMES="Search themes...",ENMITY_DEVELOPMENT_SETTINGS="Development Settings",ENMITY_DEBUG_BRIDGE_IP="Debug IP",ENMITY_DEBUG_BRIDGE_CONNECT="Connect to the debug bridge on startup",ENMITY_DEBUG_BRIDGE="Debug Bridge",ENMITY_TOAST_SETTINGS="Toast Settings",ENMITY_ASSET_BROWSER="Asset Browser",enUS={ENMITY_GENERAL:ENMITY_GENERAL,ENMITY_PLUGINS:ENMITY_PLUGINS,ENMITY_THEMES:ENMITY_THEMES,ENMITY_UPDATER:ENMITY_UPDATER,ENMITY_DEBUG_LOGS:ENMITY_DEBUG_LOGS,ENMITY_SEARCH_PLUGINS:ENMITY_SEARCH_PLUGINS,ENMITY_SEARCH_THEMES:ENMITY_SEARCH_THEMES,ENMITY_DEVELOPMENT_SETTINGS:ENMITY_DEVELOPMENT_SETTINGS,ENMITY_DEBUG_BRIDGE_IP:ENMITY_DEBUG_BRIDGE_IP,ENMITY_DEBUG_BRIDGE_CONNECT:ENMITY_DEBUG_BRIDGE_CONNECT,ENMITY_DEBUG_BRIDGE:ENMITY_DEBUG_BRIDGE,ENMITY_TOAST_SETTINGS:ENMITY_TOAST_SETTINGS,ENMITY_ASSET_BROWSER:ENMITY_ASSET_BROWSER},enGB={},Strings={"en-US":enUS,"en-GB":enGB};function asyncGeneratorStep$1(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){r(c);return}s.done?t(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator$1(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep$1(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep$1(i,n,o,a,s,"throw",e)}a(void 0)})}}var state={locale:"en-US",messages:{}};function add(e){if("object"!=typeof e||Array.isArray(e))throw Error("Locale strings must be an object with languages and strings.");for(var t in e)addStrings(t,e[t]);return{remove(){var t=i18n$1._provider._context;for(var r in e)for(var n of Object.keys(e[r]))delete t.defaultMessages[n],delete t.messages[n],delete i18n$1.Messages[n]}}}function addStrings(e,t){state.locale&&(state.messages[e]??={},Object.assign(state.messages[e],t),inject())}function inject(){if(state.locale&&i18n$1?.getLocale){var e=i18n$1._provider._context;Object.assign(e.messages,state.messages[state.locale]??{}),Object.assign(e.defaultMessages,state.messages["en-US"]??{})}}function onChange(e){return _onChange.apply(this,arguments)}function _onChange(){return(_onChange=_asyncToGenerator$1(function*(e){state.locale=e,yield i18n$1.loadPromise,inject()})).apply(this,arguments)}i18n$1?.getLocale&&(state.locale=i18n$1.getLocale()??"en-US",i18n$1.on("locale",onChange),add(Strings));var i18n=Object.freeze({__proto__:null,state:state,add:add}),metro=Object.assign(Modules,{components:Components,filters:Filters,actions:Actions,common:Common,stores:Stores,api:API$1,ui:UI}),API=Object.freeze({__proto__:null,metro:metro,assets:assets$1,patcher:Patcher$2,managers:managers,toasts:toasts,components:components,utilities:utilities,storage:storage,i18n:i18n});function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(c){r(c);return}s.done?t(l):Promise.resolve(l).then(n,o)}function _asyncToGenerator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep(i,n,o,a,s,"throw",e)}a(void 0)})}}var Logger=createLogger("Enmity","Core");function initialize(){return _initialize.apply(this,arguments)}function _initialize(){return(_initialize=_asyncToGenerator(function*(){try{Console.initialize()}catch(e){Logger.error("Console polyfill failed to initialize:",e.message)}try{WebSocket$1.initialize()}catch(t){Logger.error("Developer WebSocket failed to initialize:",t.message)}try{Settings$1.initialize()}catch(r){Logger.error("Settings UI failed to initialize:",r.message)}try{ThemeFix.initialize()}catch(n){Logger.error("Theme fix failed to initialize:",n.message)}return window.enmity=API,API})).apply(this,arguments)}function shutdown(){return _shutdown.apply(this,arguments)}function _shutdown(){return(_shutdown=_asyncToGenerator(function*(){for(var e in Patcher$2.unpatchAll(),managers)yield managers[e].shutdown();try{Console.shutdown()}catch(t){Logger.error("Console polyfill failed to initialize:",t.message)}try{WebSocket$1.shutdown()}catch(r){Logger.error("Developer WebSocket failed to shutdown:",r.message)}try{Settings$1.shutdown()}catch(n){Logger.error("Settings UI failed to shutdown:",n.message)}delete window.enmity})).apply(this,arguments)}var index={initialize,shutdown},index$1=Object.freeze({__proto__:null,initialize:initialize,shutdown:shutdown,default:index});
